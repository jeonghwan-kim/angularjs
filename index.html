<div ng-app="myApp">
  <div ng-controller="MainCtrl">
    <!-- controlloer logic -->
    <p>{{ text }}</p>
    <p>{{ text2 }}</p>
    <p>{{ text3 }}</p>
    <pre>{{ config }}</pre>
    <div>
      <p>No filter: {{ greeting }}</p>
      <p>Reverse: {{ greeting | reverse }}</p>
    </div>
    <ul>
      <li ng-repeat="number in myNumbers | filter:greaterThanNum">{{ number }}</li>
    </ul>

  </div>

  <div ng-controller="UserCtrl">
    <p class="username">Welcome, {{ user.details.username }}</p>
    <p class="id">User ID: {{ user.details.id }}</p>
  </div>

  <div ng-controller="NavCtrl">
  </div>

  <a custom-button>Clicke me</a>

</div>

<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script>
<script>
var myApp = angular.module('myApp', []);

myApp.controller('MainCtrl', ['$scope', 'Math', 'Server', function ($scope, Math, Server) {
  $scope.text = 'You are the sunshine of my life.';

  // service test
  $scope.text2 = Math.multiply(10, 12);

  // factory test
  var config = Server.get('http://localhost:8000/me.json');
  $scope.text3 = config;

  // filter test
  $scope.greeting = 'Todd Motto';

  // reapeat test
  $scope.myNumbers = [10, 25, 35, 45, 60, 80, 100];
  $scope.lowerBound = 42;
  $scope.greaterThanNum = function (item) {
    return item > $scope.lowerBound;
  };
}]);


myApp.controller('NavCtrl', ['$scope', function ($scope) {
  // Controller magic
  $scope.menu = ['신발', '모자'];
}]);

myApp.controller('UserCtrl', ['$scope', function ($scope) {
  // Controller magic
  $scope.user = {};
  $scope.user.details = {
    "username": "Ninja Kim",
    "id": "11921"
  };
}]);

myApp.directive('customButton', function () {
  return {
    restrict: 'A',
    replace: true,
    transclude: true,
    template: '<a href="http://google.com" class="myawesomebutton" ng-transclude></a>',
    link: function (scope, element, attrs) {
      // DOM 조작과 이벤트 설정은 여기서 !
    }
  };
});

myApp.service('Math', function () {
  this.multiply = function (x, y) {
    return x * y;
  };
});

myApp.factory('Server', ['$http', function ($http) {
  return {
    get: function(url) {
      return $http.get(url);
    },
    post: function(url) {
      return $http.post(url);
    },
  };
}]);

myApp.filter('reverse', function () {
  return function (input, uppercase) {
    var out = '';
    for (var i = 0; i < input.length; i++) {
      out = input.charAt(i) + out;
    };
    if (uppercase) {
      out = out.toUpperCase();
    }
    return out;
  };
});
</script>